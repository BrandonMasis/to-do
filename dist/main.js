(()=>{"use strict";Math.pow(10,8);var e=36e5;function t(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function n(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function a(e,a){var r;t(1,arguments);var i=n(null!==(r=null==a?void 0:a.additionalDigits)&&void 0!==r?r:2);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var o,s=l(e);if(s.date){var u=c(s.date,i);o=d(u.restDateString,u.year)}if(!o||isNaN(o.getTime()))return new Date(NaN);var v,y=o.getTime(),f=0;if(s.time&&(f=p(s.time),isNaN(f)))return new Date(NaN);if(!s.timezone){var g=new Date(y+f),k=new Date(0);return k.setFullYear(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()),k.setHours(g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()),k}return v=m(s.timezone),isNaN(v)?new Date(NaN):new Date(y+f+v)}var r={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},i=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,o=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,s=/^([+-])(\d{2})(?::?(\d{2}))?$/;function l(e){var t,n={},a=e.split(r.dateTimeDelimiter);if(a.length>2)return n;if(/:/.test(a[0])?t=a[0]:(n.date=a[0],t=a[1],r.timeZoneDelimiter.test(n.date)&&(n.date=e.split(r.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var i=r.timezone.exec(t);i?(n.time=t.replace(i[1],""),n.timezone=i[1]):n.time=t}return n}function c(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(n);if(!a)return{year:NaN,restDateString:""};var r=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:null===i?r:100*i,restDateString:e.slice((a[1]||a[2]).length)}}function d(e,t){if(null===t)return new Date(NaN);var n=e.match(i);if(!n)return new Date(NaN);var a=!!n[4],r=u(n[1]),o=u(n[2])-1,s=u(n[3]),l=u(n[4]),c=u(n[5])-1;if(a)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,l,c)?function(e,t,n){var a=new Date(0);a.setUTCFullYear(e,0,4);var r=7*(t-1)+n+1-(a.getUTCDay()||7);return a.setUTCDate(a.getUTCDate()+r),a}(t,l,c):new Date(NaN);var d=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(y[t]||(f(e)?29:28))}(t,o,s)&&function(e,t){return t>=1&&t<=(f(e)?366:365)}(t,r)?(d.setUTCFullYear(t,o,Math.max(r,s)),d):new Date(NaN)}function u(e){return e?parseInt(e):1}function p(t){var n=t.match(o);if(!n)return NaN;var a=v(n[1]),r=v(n[2]),i=v(n[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(a,r,i)?a*e+6e4*r+1e3*i:NaN}function v(e){return e&&parseFloat(e.replace(",","."))||0}function m(t){if("Z"===t)return 0;var n=t.match(s);if(!n)return 0;var a="+"===n[1]?-1:1,r=parseInt(n[2]),i=n[3]&&parseInt(n[3])||0;return function(e,t){return t>=0&&t<=59}(0,i)?a*(r*e+6e4*i):NaN}var y=[31,null,31,30,31,30,31,31,30,31,30,31];function f(e){return e%400==0||e%4==0&&e%100!=0}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function k(e){t(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||"object"===g(e)&&"[object Date]"===n?new Date(e.getTime()):"number"==typeof e||"[object Number]"===n?new Date(e):("string"!=typeof e&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function h(e){t(1,arguments);var n=k(e);return n.setHours(0,0,0,0),n}function S(e,n){t(2,arguments);var a=h(e),r=h(n);return a.getTime()===r.getTime()}function b(e){return t(1,arguments),S(e,Date.now())}var w={};function E(){return w}function q(e,a){var r,i,o,s,l,c,d,u;t(1,arguments);var p=E(),v=n(null!==(r=null!==(i=null!==(o=null!==(s=null==a?void 0:a.weekStartsOn)&&void 0!==s?s:null==a||null===(l=a.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==o?o:p.weekStartsOn)&&void 0!==i?i:null===(d=p.locale)||void 0===d||null===(u=d.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==r?r:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=k(e),y=m.getDay(),f=(y<v?7:0)+y-v;return m.setDate(m.getDate()-f),m.setHours(0,0,0,0),m}function D(e,a){var r,i,o,s,l,c,d,u;t(1,arguments);var p=E(),v=n(null!==(r=null!==(i=null!==(o=null!==(s=null==a?void 0:a.weekStartsOn)&&void 0!==s?s:null==a||null===(l=a.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==o?o:p.weekStartsOn)&&void 0!==i?i:null===(d=p.locale)||void 0===d||null===(u=d.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==r?r:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=k(e),y=m.getDay(),f=6+(y<v?-7:0)-(y-v);return m.setDate(m.getDate()+f),m.setHours(23,59,59,999),m}let L=[],N=[];N=null==localStorage.getItem("all-tasks")?[]:JSON.parse(localStorage.getItem("all-tasks")),L=null==localStorage.getItem("all-projects")?[]:JSON.parse(localStorage.getItem("all-projects"));const T=new Date;function j(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0}function $(){return N.filter((e=>b(a(e.dueDate))||null==e.dueDate)).sort(j)}function C(){return N.filter((e=>a(e.dueDate)>=q(T)&&a(e.dueDate)<=D(T)||null==a(e.dueDate))).sort(j)}function x(e){return e.subtasks.filter((e=>1==e.isChecked)).length}function I(){return N.filter((e=>a(e.dueDate)<T&&0==e.isChecked&&null!=a(e.dueDate)&&0==b(a(e.dueDate))))}const M=["January","February","March","April","May","June","July","August","September","October","November","December"];function O(e){return e.isChecked?"checked":""}function A(e,n,r){var i;e.innerHTML+=`\n  <div class="task-container">\n  <div class="task" data-task-id="${n.id}">\n    <div>\n      <div class="task-check">\n        <div class="round checkp${n.priority}">\n          <input type="checkbox" class="checkbox" ${O(n)}  />\n          <label class="task-label"></label>\n        </div>\n      </div>\n      <div class="task-content">\n        <div class="task-title ${function(e){return e.isChecked?"marked-task":""}(n)}">${n.title}</div>\n        <div class="task-info">\n          <div>\n            <div class="task-duedate">${i=n.dueDate,null!=i?`${M[a(i).getMonth()]} ${function(e){return t(1,arguments),k(e).getDate()}(a(i))}`:"Any day"}</div>\n            <div>\n              <div class="progress-container">\n              <div class="progress-bar" style="width:${100/n.subtasks.length*x(n)}%;"></div>\n                <progress></progress>\n              </div>\n              <div class="progress-subtask">${x(n)}/${n.subtasks.length} Subtasks</div>\n            </div>\n          </div>\n          <p class="task-description">\n          ${n.description}\n          </p>\n        </div>\n      </div>\n    </div>\n    <div class="task-options">\n      <div><i class="fa-solid fa-xmark deleteTask"></i></div>\n      <div><i class="fa-solid fa-angle-down dropSubtasks"></i></div>\n    </div>\n  </div>\n\n  ${r}\n  <div class="new-subtask">+</div>\n  </div>`}function H(e){let t="";return null!=e.subtasks&&e.subtasks.forEach((n=>{t+=`\n    <div class="subtask" data-subtask-id="${n.id}">\n    <div class="task-check">\n      <div class="round checkp4">\n        <input type="checkbox" ${O(n)} class="checkbox" data-task-id="${e.id}"/>\n        <label class="subtask-label"></label>\n      </div>\n    </div>\n    <div class="task-content">\n      <div class="task-title">\n       ${n.title}\n      </div>\n    </div>\n    </div>\n  `})),t}const J='<div class="task-container">\n<div class="new-task">+</div>\n</div>\n</div>',U=["#F95050","#F9AB50","#9BB5F9","#4C4D5C"],F=document.querySelector("#today-option"),Z=document.querySelector("#weekly-option"),z=document.querySelector("#projects-container"),R=document.querySelector("#add-projects");let Y="today-option",B=[];const P=(e,t,n,a,r,i,o,s)=>({title:e,description:t,dueDate:n,priority:a,subtasks:r,isChecked:i,project:o,category:s});function W(){z.innerHTML="",L.forEach((e=>z.innerHTML+=`<div class="project" data-project="${e.name}"><div><span class="project-tag" style="background-color:${e.color}"></span> <h5>${e.name}</h5></div> <div class="option-total">${N.filter((t=>t.project==e.name)).length}</div></div>`))}function G(){document.querySelectorAll(".project").forEach((e=>{e.addEventListener("click",(()=>{Y=`${e.getAttribute("data-project")}`,B=L.filter((e=>e.name==Y))[0],ae(Y,B)}))}))}function K(){const e=document.querySelector("#today-option .option-total"),t=document.querySelector("#weekly-option .option-total");e.textContent=`${$().length}`,t.textContent=`${C().length}`}function Q(){document.querySelectorAll(".new-task").forEach((e=>e.addEventListener("click",(()=>{if(0==e.classList.contains("new-task-form")){document.querySelectorAll(".new-task-form").forEach((e=>{e.classList.remove("new-task-form"),e.innerHTML="+"})),e.classList.add("new-task-form"),document.querySelector(".new-task-form").innerHTML='<div class="form">\n<div class="top">\n  <input type="text" id="taskform-name"\n    placeholder="Task name">\n  <input type="text" id="taskform-description"\n    placeholder="Description">\n</div>\n<div class="bottom">\n  <input type="date" id="taskform-duedate"\n    placeholder="Due date">\n  <div id="taskform-priority"><i class="fa-solid fa-flag"></i><div class="priority-option" data-priority="1"></div><div class="priority-option" data-priority="2"></div><div class="priority-option" data-priority="3"></div><div class="priority-option" data-priority="4"></div></div>\n</div>\n</div>\n<div class="form-btns">\n<div id="taskform-cancel-btn">Cancel</div>\n<div id="taskform-add-btn">Add Task</div>\n\n</div>';let t=4;document.querySelector(".new-task-form").addEventListener("click",(e=>{0==e.target.classList.contains("priority-option")&&document.querySelector("#taskform-priority").classList.contains("open")&&0==e.target.classList.contains("fa-flag")&&document.querySelector("#taskform-priority").classList.remove("open")})),document.querySelector("#taskform-priority").addEventListener("click",(e=>{e.target.classList.contains("fa-flag")&&e.target.parentElement.classList.add("open")})),document.querySelectorAll(".priority-option").forEach((e=>{e.addEventListener("click",(()=>{t=e.getAttribute("data-priority"),document.querySelector(".fa-flag").style.color=U[t-1],e.parentElement.classList.remove("open")}))})),document.querySelector("#taskform-add-btn").addEventListener("click",(e=>{let n=document.querySelector("#taskform-name").value,a=document.querySelector("#taskform-description").value,r="";if(""==document.querySelector("#taskform-duedate").value)r=null;else{let e=document.querySelector("#taskform-duedate").value.split("-");r=new Date(parseInt(e[0]),parseInt(e[1])-1,parseInt(e[2]))}"today-option"==Y||"weekly-option"==Y?N.push(P(n,a,r,t,[],!1,void 0,void 0)):N.push(P(n,a,r,t,[],!1,Y,e.target.parentElement.parentElement.parentElement.parentElement.getAttribute("data-category"))),ne(),localStorage.setItem("all-tasks",JSON.stringify(N)),ae(Y,B),K()})),document.querySelector("#taskform-cancel-btn").addEventListener("click",(e=>{event.stopImmediatePropagation();let t=e.target.parentElement.parentElement;t.classList.remove("new-task-form"),t.innerHTML="+"}))}}))))}function V(){document.querySelectorAll(".new-subtask").forEach((e=>e.addEventListener("click",(()=>{let t=prompt("title"),n=e.parentElement.querySelector(".task").getAttribute("data-task-id");N[n].subtasks.push({title:t,isChecked:!1}),ne(),localStorage.setItem("all-tasks",JSON.stringify(N)),ae(Y,B),document.querySelector(`[data-task-id="${n}"]`).parentElement.classList.add("task-open")}))))}function X(){let e=document.querySelector(".new-subtitle"),t=document.querySelector("#new-subtitle-btn"),n=document.querySelector(".new-subtitle .actual-count"),a=e.querySelector("i");t.addEventListener("click",(()=>{e.classList.add("new-subtitle-open")})),t.addEventListener("input",(()=>{n.textContent=t.value.length})),a.addEventListener("click",(()=>{B.categories.push(document.querySelector("#new-subtitle-btn").value),localStorage.setItem("all-projects",JSON.stringify(L)),ae(Y,B)}))}function _(){document.querySelectorAll(".task-options div:nth-child(1)").forEach((e=>{e.addEventListener("click",(()=>{N.length>1?N.splice(e.parentElement.parentElement.getAttribute("data-task-id"),1):N=[],ne(),localStorage.setItem("all-tasks",JSON.stringify(N)),ae(Y,B),K()}))}))}function ee(){document.querySelector(".delete-project-btn").addEventListener("click",(()=>{L.splice(L.indexOf(B),1),localStorage.setItem("all-projects",JSON.stringify(L)),N=N.filter((e=>e.project!=B.name)),localStorage.setItem("all-tasks",JSON.stringify(N)),K(),ae("today-option")}))}function te(){document.querySelectorAll(".delete-category-btn").forEach((e=>{e.addEventListener("click",(()=>{let t=N.filter((e=>e.project==B.name));N=t.filter((t=>t.category!=e.previousSibling.previousSibling.textContent)),B.categories.splice(B.categories.indexOf(e.previousSibling.previousSibling.textContent),1),localStorage.setItem("all-projects",JSON.stringify(L)),localStorage.setItem("all-tasks",JSON.stringify(N)),K(),ae(Y,B)}))}))}function ne(){let e=-1;N.forEach((t=>{let n=-1;e+=1,t.id=e,t.subtasks.forEach((e=>{n+=1,e.id=n}))}))}function ae(e,t){N=null==localStorage.getItem("all-tasks")?[]:JSON.parse(localStorage.getItem("all-tasks")),"today-option"==e?(document.querySelector(".display-container").innerHTML='\n    <div class="section-title overdue-title"><h2>Overdue</h2></div>\n\n    <div id="overdue-tasks" class="big-container"></div>\n      \n    <div class="section-title date-heading">\n      <h2>Today</h2>\n      <h4 id="actual-day">If you are reading, this something went wrong</h4>\n    </div>\n    <div id="today-tasks" class="big-container">\n     \n    </div>\n\n    ',function(){const e=document.querySelector("#today-tasks"),t=document.querySelector("#overdue-tasks");$().forEach((t=>{let n=H(t);A(e,t,n)})),e.innerHTML+=J,""!=I()?I().forEach((e=>{let n=H(e);A(t,e,n)})):(t.style.display="none",document.querySelector(".overdue-title").style.display="none")}(),document.querySelector("#actual-day").textContent=`${M[q(new Date).getMonth()]} ${(new Date).getDate()}`):"weekly-option"==e?(document.querySelector(".display-container").innerHTML='<div class="section-title date-heading">\n  <h2>Weekly</h2>\n  <h4 id="actual-week">If you are reading, this something went wrong</h4>\n  </div>\n  <div id="weekly-tasks" class="big-container">\n  \n\n  </div>\n  </div>',function(){const e=document.querySelector("#weekly-tasks");C().forEach((t=>{let n=H(t);A(e,t,n)})),e.innerHTML+=J}(),document.querySelector("#actual-week").textContent=`${M[q(new Date).getMonth()]} ${q(new Date).getDate()} to ${M[D(new Date).getMonth()]} ${D(new Date).getDate()}`):(function(e,t){const n=document.querySelector(".display-container");n.innerHTML=`<div class="section-title project-heading">\n  <div class="square" style=background-color:${t.color}></div>\n  <h2>${t.name}</h2>\n  <i class="fa-regular fa-trash-can delete-project-btn"></i>\n  </div>`,n.innerHTML+='\n  \n  <div id="no-category" class="big-container"></div>\n',0==t.categories.length&&(document.querySelector("#no-category").innerHTML+='<div class="task-container">\n    <div class="new-task">+</div>\n    </div>\n    </div>');for(let e=0;e<t.categories.length;e++)n.innerHTML+=`<div class="subtitle category-subtitle"><h3>${t.categories[e]}</h3> <i class="fa-regular fa-trash-can delete-category-btn"></i></div>\n    <div data-project="${t.name}" data-category="${t.categories[e]}" class="big-container category">`;n.innerHTML+='<div class="subtitle new-subtitle">\n<div>\n<input type="text" id="new-subtitle-btn" placeholder="Add a subtitle +" maxlength="50"/><i class="fa-solid fa-check"></i>\n</div>\n<div class="subtitle-character-count">\n<h4><span class="actual-count">0</span>/<span class="max-count">50</span></h4>\n</div>\n</div>'}(N.filter((t=>t.project==e)),t),function(e){let t=(n=e.name,N.filter((e=>e.project==n)).sort(j));var n;const a=document.querySelectorAll(".big-container.category"),r=document.querySelector("#no-category");let i=t.filter((e=>null==e.category));i==[]||(r.innerHTML="",i.forEach((e=>{let t=H(e);A(r,e,t)}))),r.innerHTML+=J,a.forEach((e=>{let n=function(e,t){return e.filter((e=>e.category==`${t.getAttribute("data-category")}`))}(t,e);n.forEach((t=>{let n=H(t);A(e,t,n)})),e.innerHTML+=J}))}(t),X(),ee(),te()),document.querySelectorAll(".dropSubtasks").forEach((e=>{e.parentElement.addEventListener("click",(t=>{let n=e.parentElement.parentElement.parentElement.parentElement;n.classList.contains("task-open")?(n.classList.remove("task-open"),e.style.cssText="transform: rotate(0deg)"):(n.classList.add("task-open"),e.style.cssText="transform: rotate(180deg)")}))})),Q(),V(),function(){const e=document.querySelectorAll(".task-label"),t=document.querySelectorAll(".subtask-label");e.forEach((e=>{e.addEventListener("click",(()=>{const t=e.parentElement.querySelector(".checkbox");let n=t.parentElement.parentElement.parentElement.parentElement,a=parseInt(n.getAttribute("data-task-id"));1==N[a].isChecked?(t.checked=!1,N[a].isChecked=!1,n.querySelector(".task-title").classList.remove("marked-task")):(t.checked=!0,N[a].isChecked=!0,n.querySelector(".task-title").classList.add("marked-task")),localStorage.setItem("all-tasks",JSON.stringify(N))}))})),t.forEach((e=>{e.addEventListener("click",(()=>{const t=e.parentElement.querySelector(".checkbox");let n=parseInt(t.getAttribute("data-task-id")),a=parseInt(t.parentElement.parentElement.parentElement.getAttribute("data-subtask-id"));1==N[n].subtasks[a].isChecked?(t.checked=!1,N[n].subtasks[a].isChecked=!1):(t.checked=!0,N[n].subtasks[a].isChecked=!0);let r=t.parentElement.parentElement.parentElement.parentElement.querySelector(".progress-subtask"),i=t.parentElement.parentElement.parentElement.parentElement.querySelector(".progress-bar");r.textContent=`${x(N[n])}/${N[n].subtasks.length} Subtasks`,i.style.width=100/N[n].subtasks.length*x(N[n])+"%",localStorage.setItem("all-tasks",JSON.stringify(N))}))}))}(),_(),W(),G()}R.addEventListener("click",(()=>{z.innerHTML+='<div id="project-creator"><div class="project" id="project-creator" data-project="null">\n<div> <input type="color" class="new-project-color" name="">\n<input type="text" placeholder="Click to edit" class="new-project-name">\n</div>\n</div><div class="new-project-options"><h3 class="warning"></h3><div id="cancel-new-project" class="option-total">Cancel</div><div id="add-new-project" class="option-total">Done</div>\n</div></div>',document.querySelector("#add-new-project").addEventListener("click",(()=>{let e=document.querySelector(".new-project-name").value,t=document.querySelector(".new-project-color").value,n=0;L.forEach((e=>{e.name==document.querySelector(".new-project-name").value&&(n+=1)})),0==n?(L.push({name:e,color:t,categories:[]}),localStorage.setItem("all-projects",JSON.stringify(L)),W(),G()):""==document.querySelector(".warning").textContent?(document.querySelector(".warning").textContent="Cannot leave this space empty",document.querySelector(".warning").style.display="flex"):(document.querySelector(".warning").style.display="flex",document.querySelector(".warning").textContent="Project names cannot be repeated")}))})),window.addEventListener("click",(e=>{if(null!=document.querySelector(".new-subtitle-open")){if(e.target.classList.contains("fa-check"))return;if("new-subtitle-btn"==e.target.id)return;document.querySelector("#new-subtitle-btn").value="",document.querySelector(".actual-count").textContent="0",document.querySelector(".new-subtitle-open").classList.remove("new-subtitle-open")}})),F.addEventListener("click",(()=>{Y="today-option",ae(Y,B)})),Z.addEventListener("click",(()=>{Y="weekly-option",ae(Y,B)})),ne(),W(),G(),K(),ae(Y,B)})();